<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wachtwoord instellen – NEN-EN 1090 – CWS NEN1090 Platform</title>
  <meta name="robots" content="noindex" />
  <!-- Webfont (enterprise) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="./assets/css/style.css" />
  <link rel="stylesheet" href="/assets/css/enterprise.css"/>
<meta property="og:site_name" content="CWS NEN1090 Platform"/>
<meta property="og:type" content="website"/>
<meta property="og:image" content="/assets/img/hero-welder.webp"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/assets/img/hero-welder.webp"/>
<script type="application/ld+json">{"@context": "https://schema.org", "@type": "SoftwareApplication", "name": "CWS NEN1090 Platform", "applicationCategory": "BusinessApplication", "operatingSystem": "Web", "description": "Enterprise platform voor NEN-EN 1090 compliance, audits, ISO 3834 ondersteuning, lascontrole (ISO 5817), auditlog en CE-dossier export per project.", "offers": {"@type": "Offer", "price": "0", "priceCurrency": "EUR", "description": "Demo/trial beschikbaar. Abonnementen op aanvraag."}}</script>
<link rel="canonical" href="https://nen1090.pages.dev/set-password.html"/>
</head>
<body>
<div class="site-topbar">
  <div class="container">
    <div class="row">
      <a class="brand" href="/">
        <span class="brand-mark" aria-hidden="true"></span>
        <b>CWS NEN1090 Platform</b>
      </a>
      <nav class="nav" aria-label="Hoofdnavigatie">
        <a href="/#features">Features</a>
        <a href="/iso-3834.html">ISO 3834</a>
        <a href="/ce-markering.html">CE-markering</a>
        <a href="/lascontrole.html">Lascontrole</a>
        <a href="/pricing.html" class="pill">Prijzen</a>
        <a href="/app/login.html" class="pill">Inloggen</a>
      </nav>
    </div>
  </div>
</div>

  <header class="topbar">
    <div class="container">
      <div class="row">
        <a class="brand" href="./index.html"><span class="logo-dot" aria-hidden="true"></span><span>NEN‑EN 1090</span></a>
        <nav class="nav"><a class="btn ghost" href="./pricing.html">Prijzen</a></nav>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="container">
      <h1>Wachtwoord instellen</h1>
      <p>Gebruik de link uit je e‑mail (invite) of rond onboarding af vanuit de betaling.</p>

      <div class="card form-card">
        <div class="kicker">stap 2</div>
        <form id="frm" class="form" autocomplete="off">
          <div class="field">
            <label for="password">Nieuw wachtwoord</label>
            <input id="password" name="password" type="password" minlength="12" required placeholder="Minimaal 12 tekens" />
            <div class="hint">Tip: gebruik een lang wachtwoord met cijfers en symbolen.</div>
          </div>
          <div class="field">
            <label for="password2">Herhaal wachtwoord</label>
            <input id="password2" name="password2" type="password" minlength="12" required />
          </div>

          <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center">
            <button class="btn primary" type="submit" id="btn">Opslaan & inloggen</button>
            <a class="btn secondary" href="./app/login.html">Terug naar inloggen</a>
          </div>
        </form>

        <hr class="sep" />
        <p class="small" id="status">—</p>
        <pre class="small" id="debug" style="display:none;white-space:pre-wrap"></pre>
      </div>
    </div>
  </main>

  <footer class="footer">
  <div class="container">
    <div class="row">
      <div>© 2026 CWS NEN1090 Platform</div>
      <div style="display:flex;gap:14px;flex-wrap:wrap">
        <a href="/privacy.html">Privacy</a>
        <a href="/security.html">Security</a>
        <a href="/legal/terms.html">Voorwaarden</a>
        <a href="/contact.html">Contact</a>
      </div>
    </div>
  </div>
</footer>
  <script src="./assets/js/main.js"></script>
  <script>
    (function(){
      const frm = document.getElementById('frm');
      const status = document.getElementById('status');
      const debug = document.getElementById('debug');
      const btn = document.getElementById('btn');

      const qs = new URLSearchParams(location.search);
      const token = qs.get('token') || '';
      if(!token) status.textContent = 'Geen token gevonden. Open deze pagina via de invite-link.';

      function setStatus(msg){ status.textContent = msg; }

      frm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const p1 = document.getElementById('password').value;
        const p2 = document.getElementById('password2').value;
        if(p1 !== p2){ setStatus('❌ Wachtwoorden komen niet overeen.'); return; }
        if(!token){ setStatus('❌ Geen token.'); return; }

        btn.disabled = true;
        setStatus('Opslaan…');
        try{
          const r = await fetch('./api/onboarding/set-password', {
            method: 'POST',
            headers: {'content-type':'application/json'},
            body: JSON.stringify({ token, password: p1 })
          });
          const j = await r.json().catch(()=>({}));

          if(new URLSearchParams(location.search).get('debug') === '1'){
            debug.style.display = 'block';
            debug.textContent = JSON.stringify(j, null, 2);
          }

          if(j && j.ok){
            setStatus('✅ Opgeslagen. Je wordt doorgestuurd…');
            location.href = j.loginUrl || './app/login.html';
          } else {
            setStatus('❌ Opslaan mislukt: ' + (j && (j.error || j.message) ? (j.error || j.message) : 'onbekend'));
          }
        } catch(_){
          setStatus('❌ Fout. Probeer opnieuw.');
        } finally {
          btn.disabled = false;
        }
      });
    })();
  </script>
</body>
</html>
